
# README

## Matcha, a fullstack application

### Project Stats
 * Started with '2.6.3', Rails system is also version '5.2.4', which is quite behind from rails '6.X.X'
 * Built with a PostgreSQL database

***
### Details

* The application has multiple pages including landing, main, profile and settings pages.

* The Mailer controllers reference a Gmail account. This means that to safetly send emails this appilcation includes a app password generated by Gmail in it's private ENV varibles. It is used for confirming new user emails, resetting passwords and notifications of messages, likes and visits between users 

* For all location based things I used the gems 'geocoder', 'geokit', and 'area' for location based things 

* For the search bar I used the pg_search gem

***

## About the Site
This is a 42 Ecole project, done for the Silicon Valley branch. If there are any questions or interests please feel free to reach out.

### Main Page

##### Filtering
* Uses the layering of query params sent in get requests from forms
* Filters user profiles, all execpt those blocked or with incomplete profiles, by the params given in a complex scope (includes smaller scopes in part)
##### Sorting
* Using a form helper with a select button it sends the choice to the query params 
* If users are filtered then a complex scope (includes smaller scopes in part) and sorts them. If no filter params exist just sorts all user profiles, execpt those blocked or with incomplete profiles.

### Profile Page
* Url is a vanity url, using a username
* Users are able to edit their profile by viewing their own profile
* On other user's profiles the user may "like", "block", or "flag" that profile.
* The profile displays the basic info of a user's profile, like first name, username, age, location, and photos.
#### Blocking
* Ajax and jquery button
* The blocked user does not come up in searches or filters by the user who blocked them, and are denied access to viewing the blocker's profile. They also will not create any notifications for the blocker
* Users that had a shared conversation have that destroyed when one user blocks the other
#### Liking 
* Ajax and jquery button
* To have a conversation two users must "like" each others profiles
#### Flagging
* Ajax and jquery button
* Sets a bool to true when flagged, the project did not create a clear reason for this function, but as is creates a way to query flagged profiles
#### Profile Settings
* Only visible to the current user on their profile page
* Current user edits their photos and profile information

### Settings Page
* Ajax buttons to switch between forms for editing the user data
* Two forms, one for passwords and one for profile info like full name, email, and username.

### Landing Page
* Notifications are counted and displayed to the user to view
* Uses Redis as a frontend server to catch incoming signals
* Blocked users 

### Realtime Messaging
* Messaging is only available when you users have both liked each other, creating a conversation object (acts as a room/channel)
* Uses Redis as a frontend server to catch incoming signals

### Realtime Notifications

### Signup Page
* 

### Login Page
* 

## The Database design
* There is a User with one Profile, with many Matches and Conversations
* The Profile has Visits, Likes, Blocks, and Pictures, Interests, and one Avatar photo
* Blocks and Likes have many Users and Profiles
* A Conversation has many messages, owned by the User who sent it 

## Things I wrote but I ended up removing

* A filter on the main page for users where the choices were submited by using the Jquery UI library and Javascriot functions that worked with the ui to show the changes made.
Was removed because of the functionalty of sorting the results of a search/filter, therefore the parameters need to be layerable in a sense, or accessable at any given time to be dymanic. 
The code taken out:

    Ruby:
    ```ruby
    <%= form_for :filter, :html => { id: "filter"}, url: main_path, method: :get do |thing_form| %>

        <%= thing_form.label "Rating:" %>

        <div id="rating_slider"></div>
        
        <%= thing_form.text_field :low, class: "left_inf" %>
        <%= thing_form.hidden_field :low %>
        <%= thing_form.text_field :high, class: "right_inf"%>
        <%= thing_form.hidden_field :high %>
        <br>

        <%= thing_form.submit "Apply", class: "sub_fil_button" %>
    <% end %> 
    ```
    Jquery in slider.js:
    ```jquery
    $(document).ready(function(){
        var slider = $('#rating_slider').slider({

            range: true,
            min: 0,
            max: 10,
            values: [0, 10],
            animate: "slow",
            orientation: "horizontal",

            slide: function(event, ui) {
                $("#filter_low").val(ui.values[0]);
                $("#filter_high").val(ui.values[1]);
            }
        });

            $("#filter_low").val(slider.slider("values")[0]);
            $("#filter_high").val(slider.slider("values")[1]);

    });

    ```





***
### Research and Links
I found some great reading on understanding the standards and systems for query_strings here:

* https://stackoverflow.com/questions/49500649/how-to-accept-multiple-values-into-the-same-key-parameter-as-an-array

* https://stackoverflow.com/questions/724526/how-to-pass-multiple-parameters-in-a-querystring

* https://docs.microsoft.com/en-us/previous-versions/iis/6.0-sdk/ms524784(v=vs.90)?redirectedfrom=MSDN

***
#### UI

I am by not by any means a UI designer but I do have a inexhaustiable curiousty about UI for applications and design

I used the gems 'animate.css-rails' and 'jquery-ui-rails' for UI elements along with creating my own layouts

Some links I found helpful with design
* https://www.crazyegg.com/blog/guides/great-form-ui-and-ux/

* https://uxdesign.cc/make-sense-of-rounded-corners-on-buttons-dfc8e13ea7f7